# Engine 配置文件示例
# 定义所有可用的 Engine 和 Pipeline → Engine 映射关系

# ============================================
# Engine 定义
# ============================================
engines:
  # ========== RunningHub 云端工作流（推荐使用） ==========
  # RunningHub 姿势迁移工作流
  runninghub_pose_transfer:
    type: runninghub
    config:
      api_key: "84427127c24546879969f10983fe578a"  # RunningHub API Key
      workflow_id: "1996080571212349442"  # 工作流 ID（.ai 版本，节点已知）
      api_base_url: "https://www.runninghub.ai"  # API 基础 URL（国际版）
      timeout: 600  # 超时时间（秒）
      poll_interval: 5  # 轮询间隔（秒）
  
  # ========== 已废弃的引擎（不再使用） ==========
  # 人脸检测 API（已废弃）
  # face_detection_api:
  #   type: external_api
  #   config:
  #     api_url: "https://api.example.com/face-detection"
  #     api_key: "${FACE_DETECTION_API_KEY}"
  #     timeout: 30
  
  # 人脸替换 API（已废弃）
  # face_swap_api:
  #   type: external_api
  #   config:
  #     api_url: "https://api.example.com/face-swap"
  #     api_key: "${FACE_SWAP_API_KEY}"
  #     timeout: 60
  
  # 人像分割 API（已废弃）
  # segmentation_api:
  #   type: external_api
  #   config:
  #     api_url: "https://api.example.com/segmentation"
  #     api_key: "${SEGMENTATION_API_KEY}"
  #     timeout: 30
  
  # ComfyUI 换头工作流（已废弃）
  # comfyui_head_swap:
  #   type: comfyui
  #   config:
  #     comfyui_url: "http://localhost:8188"
  #     workflow_path: "./workflows/head_swap_workflow.json"
  #     timeout: 300
  
  # ComfyUI 换背景工作流（已废弃）
  # comfyui_background:
  #   type: comfyui
  #   config:
  #     comfyui_url: "http://localhost:8188"
  #     workflow_path: "./workflows/background_workflow.json"
  #     timeout: 300
  
  # ComfyUI 姿势迁移工作流（已废弃 - 已替换为 RunningHub）
  # comfyui_pose_transfer:
  #   type: comfyui
  #   config:
  #     comfyui_url: "${COMFYUI_BASE_URL}"
  #     workflow_path: "./workflows/pose_swap_workflow.json"
  #     timeout: 300
  #     poll_interval: 2

# ============================================
# Pipeline 配置
# ============================================
pipelines:
  # 换头 Pipeline（暂时禁用）
  head_swap:
    enabled: false
    steps:
      # face_detection:
      #   engine: face_detection_api
      #   description: "检测人脸"
      # face_swap:
      #   engine: face_swap_api
      #   description: "替换人脸"
  
  # 换背景 Pipeline（暂时禁用）
  background_change:
    enabled: false
    steps:
      # segmentation:
      #   engine: segmentation_api
      #   description: "人像分割"
  
  # 换姿势 Pipeline（使用 RunningHub）
  pose_change:
    enabled: true
    steps:
      pose_transfer:
        engine: runninghub_pose_transfer  # 使用 RunningHub 引擎
        description: "RunningHub 姿势迁移工作流"

# ============================================
# 全局配置
# ============================================
global:
  # 重试配置
  retry:
    max_attempts: 3
    retry_delay: 2  # 秒
  
  # 超时配置
  timeout:
    default: 60
    max: 300
  
  # 缓存配置（可选）
  cache:
    enabled: false
    ttl: 3600  # 秒

