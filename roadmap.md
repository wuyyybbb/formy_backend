# Formyï½œå½¢æˆ‘  
**å½¢è±¡ç”±æˆ‘ï¼Œé£æ ¼éšå¿ƒ  
My look, my way.**

---

## é¡¹ç›®æ¦‚è§ˆï¼ˆProject Overviewï¼‰

**Formyï½œå½¢æˆ‘** æ˜¯ä¸€ä¸ªä¸“ä¸º **æœè£…æ‘„å½±å¸ˆã€æœè£…ç”µå•†ä»ä¸šè€…ã€æœè£…å“ç‰Œè¿è¥è€…** æ‰“é€ çš„ AI è§†è§‰åˆ›ä½œå·¥å…·ã€‚  
å®ƒè§£å†³ä¼ ç»Ÿæœè£…æ‹æ‘„ä¸­æœ€è€—æ—¶ã€æœ€æ˜‚è´µã€æœ€éš¾å¤ç”¨çš„ä¸‰é¡¹æ ¸å¿ƒå·¥ä½œï¼š

- **æ¢æ¨¡ç‰¹ï¼ˆæ¢å¤´ï¼‰**
- **æ¢èƒŒæ™¯ï¼ˆæº¶å›¾ï¼‰**
- **æ¢å§¿åŠ¿ï¼ˆPose Transferï¼‰**

é€šè¿‡ç»Ÿä¸€çš„ä»»åŠ¡ç³»ç»Ÿï¼ˆTask Managerï¼‰ã€ä¸šåŠ¡æµç¨‹å±‚ï¼ˆPipelineï¼‰ã€æŠ€æœ¯å¼•æ“å±‚ï¼ˆEngineï¼‰ï¼Œ  
Formy å°†å¤æ‚çš„ AI æ¨¡å‹è°ƒç”¨ï¼ˆé—­æº APIã€æœ¬åœ° ComfyUI å·¥ä½œæµï¼‰å°è£…æˆç¨³å®šå¯é çš„å›¾åƒç¼–è¾‘èƒ½åŠ›ï¼Œ  
è®©æœè£…ä»ä¸šè€…æ— éœ€æ‡‚ AIã€æ— éœ€æ‘„å½±æ£šã€æ— éœ€æ¨¡ç‰¹å³å¯é«˜è´¨é‡å±•ç¤ºæœè£…æ•ˆæœã€‚

> **æ ¸å¿ƒç†å¿µï¼šé™ä½æœè£…æ‹æ‘„æˆæœ¬ï¼Œè®©æœè£…è§†è§‰ç”Ÿäº§æ›´å¿«ã€æ›´è‡ªç”±ã€‚**

---

## æ ¸å¿ƒæŠ€æœ¯æ¶æ„ï¼ˆTechnical Architectureï¼‰

### ğŸ§© åç«¯æŠ€æœ¯æ ˆ
- **è¯­è¨€ä¸æ¡†æ¶ï¼š** Python 3.10+, FastAPI  
- **ä»»åŠ¡ç³»ç»Ÿï¼š** Redisï¼ˆä»»åŠ¡é˜Ÿåˆ—ã€çŠ¶æ€æ›´æ–°ï¼‰  
- **å›¾ç‰‡ç¼–è¾‘å†…æ ¸ï¼š**  
  - **Pipelineï¼ˆä¸šåŠ¡æµç¨‹å±‚ï¼‰**ï¼š  
    - `HeadSwapPipeline`ï¼ˆAI æ¢å¤´æµç¨‹ï¼‰  
    - `BackgroundPipeline`ï¼ˆAI æ¢èƒŒæ™¯ / æº¶å›¾æµç¨‹ï¼‰  
    - `PoseChangePipeline`ï¼ˆAI å§¿åŠ¿æ”¹å˜æµç¨‹ï¼‰  
  - **Engineï¼ˆæŠ€æœ¯è°ƒç”¨å±‚ï¼‰**ï¼š  
    - `ExternalApiEngine`ï¼ˆé—­æºæ¨¡å‹ API è°ƒç”¨ï¼‰  
    - `ComfyUIEngine`ï¼ˆæœ¬åœ° ComfyUI å·¥ä½œæµè°ƒç”¨ï¼‰  
    - `EngineRegistry`ï¼ˆPipeline â†’ Engine â†’ Step é…ç½®æ˜ å°„ï¼‰  
- **å­˜å‚¨ï¼š** æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿï¼ˆå¯æ‰©å±•åˆ°å¯¹è±¡å­˜å‚¨ OSS/S3ï¼‰  
- **è¿è¡Œç¯å¢ƒï¼š** Uvicorn / ASGI

---

### ğŸ–¥ï¸ å‰ç«¯æŠ€æœ¯æ ˆ
- **æ¡†æ¶ï¼š** Reactï¼ˆViteï¼‰+ Tailwind CSS
- **è¯­è¨€ï¼š** TypeScript
- **çŠ¶æ€ç®¡ç†ï¼š** Zustand
- **ç½‘ç»œé€šä¿¡ï¼š** Axios
- **æ¨¡å—ç»“æ„ï¼š**  
  - æ ¸å¿ƒç¼–è¾‘å™¨ï¼ˆEditorï¼‰ï¼šä¸Šä¼ åŒº / æ¨¡å¼åˆ‡æ¢ / é¢„è§ˆåŒº  
  - ä¸‰ç±»æ¨¡å¼ï¼š`HEAD_SWAP`ã€`BACKGROUND_CHANGE`ã€`POSE_CHANGE`  
  - è‡ªåŠ¨è½®è¯¢ä»»åŠ¡çŠ¶æ€ï¼Œç›´è‡³ç”Ÿæˆç»“æœ

---

### ğŸ”§ æ¶æ„ç‰¹ç‚¹ï¼ˆSystem Characteristicsï¼‰

- **å‰åç«¯ä¸€ä½“åŒ– Monorepo æ¶æ„**  
- **ä»»åŠ¡é©±åŠ¨è®¾è®¡ï¼šæ”¯æŒé•¿æ—¶é—´ AI æ¸²æŸ“æµç¨‹**  
- **Pipeline + Engine åŒå±‚è§£è€¦ï¼šä¾¿äºæ¥å…¥æ–°æ¨¡å‹/å·¥ä½œæµ**  
- **é…ç½®é©±åŠ¨æ¨¡å‹é€‰æ‹©ï¼ˆengine_config.ymlï¼‰**  
- **é€‚åˆä¸ªäººå¼€å‘è€…ã€æœ¬åœ°éƒ¨ç½²ã€å°å›¢é˜Ÿæ‰©å±•**

---

## ç³»ç»Ÿæ ¸å¿ƒæµç¨‹ï¼ˆHigh-level Workflowï¼‰

1. æœè£…æ‘„å½±å¸ˆ/è¿è¥ä¸Šä¼ åŸå§‹æœè£…æ¨¡ç‰¹å›¾  
2. é€‰æ‹©æ¨¡å¼ï¼ˆæ¢å¤´ / æ¢èƒŒæ™¯ / æ”¹å§¿åŠ¿ï¼‰  
3. å‰ç«¯è°ƒç”¨ `POST /api/v1/tasks` åˆ›å»ºä»»åŠ¡  
4. Task Manager å†™å…¥ Redis â†’ æ¨å…¥é˜Ÿåˆ—  
5. Worker æ¶ˆè´¹ä»»åŠ¡ â†’ åˆ†å‘åˆ°å¯¹åº” Pipeline  
6. Pipeline æ ¹æ®é…ç½®è°ƒç”¨å¤šä¸ª Engineï¼ˆé—­æº API æˆ– ComfyUI Workflowï¼‰  
7. Engine è¾“å‡ºä¸­é—´å›¾åƒ â†’ Pipeline äº§å‡ºæœ€ç»ˆæˆç‰‡  
8. Worker æ›´æ–°ä»»åŠ¡çŠ¶æ€ä¸º `done`  
9. å‰ç«¯è½®è¯¢ä»»åŠ¡çŠ¶æ€ â†’ å±•ç¤ºæœ€ç»ˆæœè£…æˆç‰‡

---

## ä¸šåŠ¡ä»·å€¼ï¼ˆBusiness Valueï¼‰

### ğŸŒŸ 1. å¤§å¹…é™ä½æœè£…æ‹æ‘„æˆæœ¬ï¼ˆèŠ‚çœæ¨¡ç‰¹è´¹/åœºåœ°è´¹ï¼‰
ä¼ ç»Ÿæœè£…æ‹æ‘„éœ€è¦ï¼š
- æ‘„å½±åœºåœ°
- ä¸“ä¸šæ¨¡ç‰¹
- é€ å‹åŒ–å¦†
- å¤šåœºæ™¯å¸ƒå…‰
- ä¿®å›¾ä¸åæœŸäººåŠ›æˆæœ¬

Formy ä½¿ç”¨ AI æ›¿ä»£å¤§é‡é‡å¤æ€§è§†è§‰å·¥ä½œï¼Œ  
è®©æ‹æ‘„ä»â€œéœ€è¦ä¸€æ”¯å›¢é˜Ÿâ€å˜æˆâ€œåªéœ€ä¸€å°ç”µè„‘â€ã€‚

---

### ğŸŒŸ 2. è®©ä¸€å¼ æœè£…å›¾è·å¾—å¤šæ¨¡ç‰¹ã€å¤šåœºæ™¯ã€å¤šå§¿åŠ¿ç‰ˆæœ¬
é€‚ç”¨äºï¼š

- ç›´æ’­é—´é€‰æ¬¾  
- æœè£… SKU æ‰©å›¾  
- ç”µå•†å¹³å° A/B æµ‹è¯•  
- æ–°å“é¢„æ¸²æŸ“æ•ˆæœå›¾  
- å¤šæ¨¡ç‰¹å¤šåœºæ™¯ç´ ææ‰¹é‡äº§å‡º  

åªéœ€ä¸€å¼ åŸå›¾ï¼Œå³å¯ç”Ÿæˆå‡ åç§ä¸åŒç‰ˆæœ¬ã€‚

---

### ğŸŒŸ 3. è§£å†³æœè£…ä»ä¸šè€…å¸¸è§ç—›ç‚¹
- æ¨¡ç‰¹æ¡£æœŸéš¾çº¦ â†’ AI æ¢å¤´  
- åœºæ™¯æ‹æ‘„æ˜‚è´µ â†’ AI æ¢èƒŒæ™¯  
- å›ºå®šå§¿åŠ¿ä¸å¤Ÿå¸å¼• â†’ AI å§¿åŠ¿æ”¹å˜  
- æ–°æ¬¾æœªåˆ°è´§æ— æ³•æ‹æ‘„ â†’ æå‰è§†è§‰é¢„æ¼”  
- æ‰¹é‡å‡ºå›¾æ…¢ â†’ AI æµç¨‹åŒ–å¤„ç†

---

### ğŸŒŸ 4. æå‡æœè£…å±•ç¤ºèƒ½åŠ›ä¸è½¬åŒ–ç‡
æ›´ä¸°å¯Œçš„æ¨¡ç‰¹è¡¨æƒ…ã€å§¿åŠ¿ã€åœºæ™¯ç»„åˆ  
= æ›´é€‚é…ä¸åŒäººç¾¤ã€å¹³å°ã€æ¶ˆè´¹åœºæ™¯  
= æ›´é«˜ç‚¹å‡»ç‡ä¸æˆäº¤è½¬åŒ–ç‡

---

### ğŸŒŸ 5. æ¶æ„å¯æŒç»­æ‰©å±•ï¼ˆé¢å‘æœªæ¥ï¼‰
Formy é‡‡ç”¨ **Pipeline + Engine + é…ç½®é©±åŠ¨** çš„å¯æ‹“å±•æ¡†æ¶ï¼Œå¯è½»æ¾æ–°å¢ï¼š

- æ–°çš„é—­æº APIï¼ˆå¦‚æ›´å¥½çš„æŠ å›¾/æ¢å¤´æ¨¡å‹ï¼‰  
- æ–°çš„ ComfyUI workflowï¼ˆå¦‚å…‰å½±å¢å¼ºã€é£æ ¼ç»Ÿä¸€ï¼‰  
- æ–°åŠŸèƒ½ï¼ˆå¦‚å¸ƒæ–™ç»†èŠ‚å¢å¼ºã€HDRã€æ¸…æ™°åº¦ä¿®å¤ï¼‰

æ— éœ€æ”¹åŠ¨ä¸šåŠ¡ä»£ç ï¼Œåªéœ€ä¿®æ”¹é…ç½®æ–‡ä»¶ã€‚

---

# âœ… æ€»ç»“

**Formyï½œå½¢æˆ‘** æ˜¯ä¸€ä¸ªé¢å‘æœè£…è¡Œä¸šçš„ä¸ªäºº AI å·¥å…·ï¼š  
- é™ä½æœè£…æ‹æ‘„æˆæœ¬  
- æ‰©å¤§æœè£…å†…å®¹äº§èƒ½  
- æ— éœ€æŠ€æœ¯èƒŒæ™¯å³å¯ç”Ÿæˆä¸“ä¸šæœè£…è§†è§‰å†…å®¹  
- è®©æœè£…æ‘„å½±å¸ˆã€ç”µå•†è¿è¥ã€æœè£…ä»ä¸šè€…  
  **ç”¨ AI å¿«é€Ÿç”Ÿæˆæ›´æœ‰é£æ ¼ã€æ›´èƒ½è½¬åŒ–çš„æœè£…å±•ç¤ºå›¾**

> **å½¢è±¡ç”±æˆ‘ï¼Œé£æ ¼éšå¿ƒ  
My look, my way.**











ai-fashion/
â”œâ”€â”€ backend/                                   # åç«¯æœåŠ¡ï¼ˆFastAPIï¼‰
â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â”œâ”€â”€ main.py                            # å…¥å£
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ core/                              # åŸºç¡€æ¡†æ¶
â”‚   â”‚   â”‚   â”œâ”€â”€ config.py
â”‚   â”‚   â”‚   â”œâ”€â”€ logging.py
â”‚   â”‚   â”‚   â””â”€â”€ security.py
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ api/                               # æ¥å£å±‚
â”‚   â”‚   â”‚   â”œâ”€â”€ deps.py
â”‚   â”‚   â”‚   â””â”€â”€ v1/
â”‚   â”‚   â”‚       â”œâ”€â”€ routes_tasks.py           # åˆ›å»º/æŸ¥è¯¢ä»»åŠ¡
â”‚   â”‚   â”‚       â”œâ”€â”€ routes_upload.py          # ä¸Šä¼ æ–‡ä»¶
â”‚   â”‚   â”‚       â””â”€â”€ routes_auth.py            # ç™»å½•æ³¨å†Œï¼ˆå¯ç©ºï¼‰
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ schemas/                           # DTO & å‚æ•°ç»“æ„
â”‚   â”‚   â”‚   â”œâ”€â”€ task.py
â”‚   â”‚   â”‚   â”œâ”€â”€ image.py
â”‚   â”‚   â”‚   â””â”€â”€ user.py
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ db/                                # æ•°æ®å±‚ï¼ˆå¯ç©ºï¼‰
â”‚   â”‚   â”‚   â”œâ”€â”€ connection.py
â”‚   â”‚   â”‚   â”œâ”€â”€ base.py
â”‚   â”‚   â”‚   â””â”€â”€ models.py
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ services/                          # åç«¯æ ¸å¿ƒé€»è¾‘
â”‚   â”‚   â”‚   â”œâ”€â”€ storage/                       # å›¾ç‰‡å­˜å‚¨
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ interface.py
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ local_storage.py
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ tasks/                         # ä»»åŠ¡ç³»ç»Ÿ
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ manager.py                 # TaskService
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ queue.py                   # Redis é˜Ÿåˆ—
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ worker.py                  # Worker å¾ªç¯
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ image/                         # å›¾ç‰‡ç¼–è¾‘æ ¸å¿ƒ
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ enums.py                   # HEAD_SWAP / BACKGROUND_CHANGE / POSE_CHANGE
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ dto.py                     # EditTaskInput / Result
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ edit_service.py            # Pipeline ç»Ÿä¸€å…¥å£
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ pipelines/                 # ä¸‰å¤§åŠŸèƒ½æµç¨‹ï¼ˆä»…æ¡†æ¶ï¼‰
â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ head_swap_pipeline.py
â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ background_pipeline.py
â”‚   â”‚   â”‚   â”‚       â””â”€â”€ pose_change_pipeline.py
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â””â”€â”€ engines/                       # æŠ€æœ¯å±‚ï¼ˆæ¨¡å‹/å·¥ä½œæµï¼‰
â”‚   â”‚   â”‚       â”œâ”€â”€ base.py                    # EngineBase
â”‚   â”‚   â”‚       â”œâ”€â”€ external_api.py            # é—­æºæ¨¡å‹ APIï¼ˆæ¡†æ¶ï¼‰
â”‚   â”‚   â”‚       â”œâ”€â”€ comfyui_engine.py          # æœ¬åœ° ComfyUI Workflowï¼ˆæ¡†æ¶ï¼‰
â”‚   â”‚   â”‚       â””â”€â”€ registry.py                # EngineRegistry: æ˜ å°„ Pipeline â†’ Engine
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ utils/
â”‚   â”‚   â”‚   â”œâ”€â”€ image_io.py
â”‚   â”‚   â”‚   â””â”€â”€ id_generator.py
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ tests/                             # æµ‹è¯•ç›®å½•ï¼ˆç»“æ„åŒ–ï¼‰
â”‚   â”‚       â”œâ”€â”€ test_tasks.py
â”‚   â”‚       â”œâ”€â”€ test_pipelines.py
â”‚   â”‚       â””â”€â”€ test_engines.py
â”‚   â”‚
â”‚   â”œâ”€â”€ engine_config.yml                      # Engine é…ç½®ï¼ˆä¸å«å®ç°ï¼‰
â”‚   â”œâ”€â”€ requirements.txt
â”‚   â””â”€â”€ pyproject.toml
â”‚
â”œâ”€â”€ frontend/                                  # å‰ç«¯ï¼ˆReact + TSï¼‰
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ main.tsx / index.tsx               # å‰ç«¯å…¥å£
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ router/
â”‚   â”‚   â”‚   â””â”€â”€ index.tsx                      # / /editor /gallery /login
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ pages/
â”‚   â”‚   â”‚   â”œâ”€â”€ Home.tsx                       # é¦–é¡µ
â”‚   â”‚   â”‚   â”œâ”€â”€ Editor.tsx                     # æ ¸å¿ƒç¼–è¾‘å™¨ï¼ˆæ¢å¤´/æ¢èƒŒæ™¯/å§¿åŠ¿ï¼‰
â”‚   â”‚   â”‚   â”œâ”€â”€ Gallery.tsx                    # ä½œå“é›†ï¼ˆå¯ç©ºï¼‰
â”‚   â”‚   â”‚   â””â”€â”€ Login.tsx                      # ç™»å½•ï¼ˆå¯ç©ºï¼‰
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”‚   â”œâ”€â”€ layout/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ AppLayout.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ editor/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ModeTabs.tsx               # 3 æ¨¡å¼åˆ‡æ¢
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ UploadPanel.tsx            # ä¸Šä¼ å›¾ç‰‡åŒº
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ActionBar.tsx              # ç”Ÿæˆ/ä¸‹è½½
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ResultPreview.tsx          # å‰åå¯¹æ¯”
â”‚   â”‚   â”‚   â””â”€â”€ common/
â”‚   â”‚   â”‚       â”œâ”€â”€ Toast.tsx
â”‚   â”‚   â”‚       â””â”€â”€ LoadingSpinner.tsx
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â”‚   â”œâ”€â”€ client.ts                      # axios å°è£…
â”‚   â”‚   â”‚   â”œâ”€â”€ tasks.ts                       # createTask / getTaskStatus
â”‚   â”‚   â”‚   â””â”€â”€ upload.ts                      # ä¸Šä¼ å›¾ç‰‡
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ store/
â”‚   â”‚   â”‚   â”œâ”€â”€ editorStore.ts                 # å‰ç«¯çŠ¶æ€ï¼ˆä»»åŠ¡/å›¾ç‰‡/æ¨¡å¼ï¼‰
â”‚   â”‚   â”‚   â””â”€â”€ userStore.ts                   # ç™»å½•çŠ¶æ€ï¼ˆå¯ç©ºï¼‰
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ styles/
â”‚   â”‚       â””â”€â”€ index.css
â”‚   â”‚
â”‚   â””â”€â”€ package.json
â”‚
â”œâ”€â”€ docs/                                      # æ–‡æ¡£
â”‚   â”œâ”€â”€ ROADMAP_FASHION.md                     # æœ¬æ–‡ä»¶
â”‚   â””â”€â”€ API_SPEC.md                            # API å®šä¹‰ï¼ˆå¯ç©ºï¼‰
â”‚
â””â”€â”€ README.md
